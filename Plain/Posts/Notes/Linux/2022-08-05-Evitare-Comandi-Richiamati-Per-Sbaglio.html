<!DOCTYPE html>

<html lang="it"><head>
<style> body { color: #000000; background-color: #FFFFFF; } @media (prefers-color-scheme: dark) { body { color: #FFFFFF; background-color: #000000; } } img { max-width: 100%; max-height: 100vh; } </style><meta charset="utf-8"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><link href="https://sitoctt.octt.eu.org/Posts/Notes/Linux/2022-08-05-Evitare-Comandi-Richiamati-Per-Sbaglio.html" rel="canonical"/><meta content="http://sitoctt2fxjvx3lc2iqqef2aeulflprjaasv2xl4zi7sxxbmvjy5b5yd.onion/Posts/Notes/Linux/2022-08-05-Evitare-Comandi-Richiamati-Per-Sbaglio.html" http-equiv="onion-location"/><link href="../../../Assets/Global.css" rel="stylesheet"/><link href="../../../favicon.png" rel="icon" type="image/png"/><link href="../../../feed/atom.xml" rel="alternate" title="Feed Atom (Blog)" type="application/atom+xml"/><link href="../../../feed/rss.xml" rel="alternate" title="Feed RSS (Blog)" type="application/rss+xml"/><link href="../../../feed/site.atom.xml" rel="alternate" title="Feed Atom (Site)" type="application/atom+xml"/><link href="../../../feed/site.rss.xml" rel="alternate" title="Feed RSS (Site)" type="application/rss+xml"/><meta content="staticoso" name="generator"/><meta content="website" property="og:type"/><title>Evitare di richiamare comandi per sbaglio nel terminale - âœ¨sitocttâœ¨</title><meta content="Lavorando nel terminale, magari allo sviluppo di programmi, mi capita spesso di richiamare per sbaglio un comando che non dovrei." name="description"/><meta content="OctoSpacc" name="author"/><meta content=" Evitare di richiamare comandi per sbaglio nel terminale - âœ¨sitocttâœ¨" property="og:title"/><meta content="Lavorando nel terminale, magari allo sviluppo di programmi, mi capita spesso di richiamare per sbaglio un comando che non dovrei." property="og:description"/><meta content="" property="og:image"/><meta content="https://sitoctt.octt.eu.org/Posts/Notes/Linux/2022-08-05-Evitare-Comandi-Richiamati-Per-Sbaglio.html" property="og:url"/><!-- <meta name="keywords" content="[staticoso:PageKeywords]"/> --><meta content="2022-08-05" property="article:published_time"/><meta id="RawDataCssInject"/><script src="../../../Assets/Global.js"></script><!--
I still haven't yet prepared this lol
[<]script src="../../../Assets/AVIF-Polyfill/index.js" defer="true"[>][</]script[>]
--><link href="../../../Assets/sitoctt.css" rel="stylesheet"/><!--style>
</style---><link href="https://octtspacc.gitlab.io/twemoji-astonishing/twemoji-astonishing.min.css" rel="stylesheet"/></head><body id="Body"><div id="Background"></div><div id="Header"></div><div id="Container"><input checked="" id="DesktopModeCheck" type="checkbox"/><label for="DesktopModeCheck" id="DesktopModeLabel" title="Attiva/Disattiva Vista a Colonne"><big><b>[<span class="twa twa-framed-picture twa-ğŸ–¼ï¸"><span>ğŸ–¼ï¸</span></span>]</b></big></label><div id="TopBox"><div id="TopBoxLeft"><h3><a href="../../../index.html"><strong class="twa twa-sparkles"><span>âœ¨</span></strong><strong class="MainIdTextGradientL">sitoctt</strong><strong class="twa twa-sparkles"><span>âœ¨</span></strong></a></h3></div><div id="TopBoxRight"><a class="NoABigger Pixelated" href="../../../index.html#-Feed-e-notifiche"><img alt="Feed" height="33px" src="http://http.sitoctt-assets.octt.eu.org/public/Media/Buttons/Feed-88x31.png" title="Feed" width="88px"/></a><span> </span><a class="NoABigger" href="../../../index.html#-Sorgenti-e-licenze"><img alt="CC BY-SA" height="31px" src="http://http.sitoctt-assets.octt.eu.org/public/Media/Buttons/CC-BY-SA.svg" title="CC BY-SA" width="88px"/></a></div></div><div id="MiddleBox"><div id="LeftBoxContainer"><details><summary title="Menu Globale"><big><b>[<span class="twa twa-books twa-ğŸ“š"><span>ğŸ“š</span></span>]</b></big></summary><div id="LeftBox"><ul class="staticoso-TreeList staticoso-PagesList"><li><a href="../../../index.html"><span class="twa twa-house twa-ğŸ ">ğŸ </span> ~Home~</a></li><li><a href="../../../Chi-Sono.html"><span class="twa twa-grinning-cat"><span>ğŸ˜º</span></span> Chi sono</a></li><li><a href="../../../Devlogs.html"><span class="twa twa-floppy-disk twa-ğŸ’¾">ğŸ’¾</span> Devlogs</a></li><li><a href="../../../PicoBlog.html"><span class="twa twa-envelope twa-âœ‰ï¸"><span>âœ‰ï¸</span></span> PicoBlog</a></li><li><a href="https://hub.octt.eu.org">ğŸ’ OctoSpacc Hub</a></li><li><a href="https://kb.octt.eu.org" rel="noopener" target="_blank">ğŸ“¦ OcttKB</a></li><li><del><a href="https://octtspacc.gitlab.io/bachecoctt" rel="noopener" target="_blank">ğŸ”–ï¸ Bacheca (Old)</a></del></li><li><a href="https://listed.to/@u8/guestbook" rel="noopener" target="_blank">ğŸ“– Guestbook</a></li><li><a href="../../../Donazioni.html"><span class="twa twa-money-bag"><span>ğŸ’°</span></span> Donazioni</a></li><li><span><span class="twa twa-card-index-dividers twa-ğŸ—‚ï¸"><span>ğŸ—‚ï¸</span></span> Raccolte</span><ul><li><a href="../../../Categories/Blog.html"><span class="twa twa-notebook twa-ğŸ““ï¸"><span>ğŸ““ï¸</span></span> Blog</a></li><li><a href="../../../Categories/MicroBlog.html"><span class="twa twa-ledger twa-ğŸ“’"><span>ğŸ“’</span></span> MicroBlog</a></li><li><a href="../../../Categories/Fritto-Misto.html"><span class="twa twa-unicorn"><span>ğŸ¦„</span></span> Fritto Misto</a></li><li><a href="../../../Categories/DIY.html"><span class="twa twa-hammer-and-wrench"><span>ğŸ› ï¸</span></span> DIY</a></li><li><a href="../../../Categories/Ecologia.html"><span class="twa twa-recycling-symbol"><span>â™»ï¸</span></span> Ecologia</a></li><li><a href="../../../Categories/Gaming.html"><span class="twa twa-joystick"><span>ğŸ•¹ï¸</span></span> Gaming</a></li><li><a href="../../../Categories/Internet.html"><span class="twa twa-globe-with-meridians twa-ğŸŒï¸"><span>ğŸŒï¸</span></span> Internet</a></li><li><a href="../../../Categories/Mobile.html"><span class="twa twa-mobile-phone"><span>ğŸ“±ï¸</span></span> Mobile</a></li><li><a href="../../../Categories/Note.html"><span class="twa twa-memo"><span>ğŸ“ï¸</span></span> Note</a></li><li><a href="../../../Categories/Rasperino.html"><span class="twa twa-money-bag"><span>ğŸ’°</span></span> Rasperino</a></li><li><a href="../../../Categories/Sysadmin.html"><span class="twa twa-gear twa-âš™ï¸"><span>âš™ï¸</span></span> Sysadmin</a></li><li><a href="../../../Categories/Tecnologia.html"><span class="twa twa-satellite-antenna twa-ğŸ“¡"><span>ğŸ“¡</span></span> Tecnologia</a></li></ul></li></ul><hr/><div class="Pixelated NoABigger" id="LeftBoxBottom"><a href="https://mastodon.uno/@octo" rel="noopener" target="_blank"><img height="33px" src="http://http.sitoctt-assets.octt.eu.org/public/Media/Buttons/Follow-me-on-Mastodon-88x31.png" title="Follow me on Mastodon" width="88px"/></a><span> </span><a href="https://www.gnu.org/home.it" rel="noopener nofollow" target="_blank"><img height="33px" src="http://http.sitoctt-assets.octt.eu.org/public/Media/Buttons/Made-on-GNU-Linux-88x31.png" title="Made on GNU/Linux" width="88px"/></a><br/><a href="https://www.mozilla.org/it/firefox" rel="noopener nofollow" target="_blank"><img height="33px" src="http://http.sitoctt-assets.octt.eu.org/public/Media/Buttons/Firefox/Firefox-Modern-88x31.png" title="Firefox" width="88px"/></a><span></span> <a href="https://www.torproject.org/it" rel="noopener nofollow" target="_blank"><img height="33px" src="http://http.sitoctt-assets.octt.eu.org/public/Media/Buttons/Tor-88x31.png" title="Tor" width="88px"/></a><br/><a href="https://archive.org" rel="noopener nofollow" target="_blank"><img height="33px" src="http://http.sitoctt-assets.octt.eu.org/public/Media/Buttons/Sites/InternetArchive-88x31.png" title="Internet Archive" width="88px"/></a><span> </span><!-- Wikipedia | https://commons.wikimedia.org/wiki/File:Wikipedia-microbar-hu.png --><span><a href="https://www.wikipedia.org" rel="noopener nofollow" target="_blank" title="hu:User:Boro, CC BY-SA 3.0 &lt;https://creativecommons.org/licenses/by-sa/3.0&gt;, via Wikimedia Commons"><img height="33px" src="http://http.sitoctt-assets.octt.eu.org/public/Media/Buttons/Sites/Wikipedia/Wikipedia-88x31.png" title="Wikipedia" width="88px"/></a><a class="YesHoverLight" href="https://commons.wikimedia.org/wiki/File:Wikipedia-microbar-hu.png" rel="noopener nofollow" style="Font-Size:Small; Margin-Left:-2em; Color:Black; Vertical-Align:Super;" target="_blank" title="hu:User:Boro, CC BY-SA 3.0 &lt;https://creativecommons.org/licenses/by-sa/3.0&gt;, via Wikimedia Commons">[s]</a></span></div></div></details></div><div id="RightBoxContainer"><details><summary title="Sezioni della Pagina"><big><b>[<span class="twa twa-bookmark-tabs twa-ğŸ“‘"><span>ğŸ“‘</span></span>]</b></big></summary><div id="RightBox"><ul class="staticoso-TreeList"><li><a href="#-Evitare-di-richiamare-comandi-pe"> Evitare di richiamare comandi per sbaglio nel terminale</a><ul><li><a href="#-Lo-script"> Lo script</a></li><li><a href="#-Come-si-usa"> Come si usa</a></li></ul></li></ul></div></details></div><div id="MainBox"><div id="MainBoxTop"><p><span class="staticoso-ContentHeader-CreatedOn" id="staticoso-ContentHeader-CreatedOn"><span class="staticoso-Label">Creato in data</span>: <span class="staticoso-Value">2022-08-05</span></span><br/><span class="staticoso-ContentHeader-Categories" id="staticoso-ContentHeader-Categories"><span class="staticoso-Label">Categorie</span>:<span class="staticoso-Value"> <a href="../../../Categories/Note.html">Note</a></span></span><br/><span class="staticoso-ContentHeader-Index" id="staticoso-ContentHeader-Index"><span class="staticoso-Value">Non in elenco</span></span><br/></p></div><div id="PageContent"><h1 class="SectionHeading staticoso-SectionHeading"><span class="SectionLink staticoso-SectionLink"><a href="#-Evitare-di-richiamare-comandi-pe"><span>Â»</span></a> </span><span class="SectionTitle staticoso-SectionTitle" id="-Evitare-di-richiamare-comandi-pe">Evitare di richiamare comandi per sbaglio nel terminale</span></h1><p>Lavorando nel terminale, magari allo sviluppo di programmi, mi capita spesso di richiamare per sbaglio un comando che non dovrei.</p><p>CiÃ² mi succede perchÃ© lavoro in questo modo: modifico qualcosa nella finestra del mio editor di testo di fiducia, quindi passo alla finestra del terminale, e premo <code>[Freccia Su]</code> (che richiama l'ultimo comando eseguito) ed <code>[Invio]</code> per eseguirlo.</p><p>Quello che ho notato Ã¨ che certe volte, nella fretta, mi capita di premere una volta di troppo <code>[Freccia Su]</code>, cosa che richiama il penultimo comando eseguito, o quello ancora prima.<br/> Visto che praticamente queste sequenze di azioni le faccio quasi in automatico, senza leggere per accertarmi che il comando selezionato sia effettivamente quello che voglio prima di premere <code>[Invio]</code> (perchÃ© solo quello mi aspetto), accade diverse volte che io esegua un comando che non dovrei: spesso, si tratta del comando per fare un commit <a _:mdtgtblank:_="" href="https://en.wikipedia.org/wiki/Git" rel="noopener" target="_blank">Git</a> delle mie modifiche alla cartella di lavoro, e subito caricarle in cloud.</p><p>Ora, questa cosa non va bene, perchÃ© significa che nella cronologia di Git avrÃ² certi punti "sbagliati": con descrizioni dal testo duplicato, e il codice in uno stato inadatto, non funzionante, perchÃ© ero nel pieno di testare alcune modifiche.<br/> Avere una cronologia di Git cosÃ¬ conciata intacca decisamente la sua qualitÃ , perchÃ© Ã¨ piÃ¹ difficile trovare un punto specifico passato del codice in futuro, cosa che nullifica una delle funzionalitÃ  utili di Git - e in generale Ã¨ qualcosa che non mi piace, mi da fastidio, vedere la cronologia sporca.</p><h2 class="SectionHeading staticoso-SectionHeading"><span class="SectionLink staticoso-SectionLink"><a href="#-Lo-script"><span>Â»</span></a> </span><span class="SectionTitle staticoso-SectionTitle" id="-Lo-script">Lo script</span></h2><p>Per risolvere il problema, mi sono inventata questo scriptino (testato con <em>sh</em> e <em>bash</em>), l'idea Ã¨ di avviare i comandi "pericolosi" attraverso di lui nelle situazioni in cui devo fare quelle mie mosse con il terminale (ma, volendo, lo si puÃ² impostare come alias per richiamarlo in maniera implicita sempre per un dato comando).</p><pre class="CodeScroll"><code>Profile="~/.bashrc"

a=${RANDOM: -1}
b=${RANDOM: -1}

echo "[!] Confirm your command"
echo "[?] $a + $b = ?"
read Input

if [ "$Input" -eq "$((a+b))" ] 2&gt;/dev/null
then
    $SHELL -c "source "$Profile"; $@"
else
    echo "[!] Wrong input"
fi
</code></pre><h2 class="SectionHeading staticoso-SectionHeading"><span class="SectionLink staticoso-SectionLink"><a href="#-Come-si-usa"><span>Â»</span></a> </span><span class="SectionTitle staticoso-SectionTitle" id="-Come-si-usa">Come si usa</span></h2><p>Ho salvato il codice all'interno di una funzione <code>function comconf() { }</code> nel mio file di profilo bash.<br/> Ora, quando devo eseguire un comando marso, mi basta fare <code>comconf '&lt;comando&gt;'</code>; il programma mi chiederÃ  di scrivere il risultato di un'operazione aritmetica semplice generata casualmente, e solo se ciÃ² che scrivo Ã¨ giusto (quindi, solo se sto prestando attenzione) il mio comando verrÃ  eseguito.</p><pre class="CodeScroll"><code>$ # Esempio
$ comconf 'echo "Prova"; echo "Provina"'
[!] Confirm your command
[?] 1 + 3 = ?
4
Prova
Provina
$
</code></pre><hr/><p>Lo script ha qualche aspetto strano, per esempio il fatto che non funziona se eseguito direttamente dalla shell corrente (ed Ã¨ per questo che esegue il comando desiderato in un altro processo di shell, con l'argomento <code>-c</code>). Per questo motivo, devo anche caricare esplicitamente il mio file di profilo nella nuova shell, perchÃ© non viene fatto in automatico e lÃ¬ ho altri alias e funzioni che mi servono.<br/> Come se non bastasse, se non uso i singoli apici per racchiudere il comando che voglio chiamare, se questo contiene altri apici Ã¨ come se questi venissero ignorati, e quindi il comando finale si puÃ² rompere.</p><p>Vabbe, problema risolto ad ogni modo. Niente piÃ¹ incidenti a causa di un <code>[Freccia Su]</code> di troppo.</p></div><div id="MainBoxBottom"></staticoso:comments><br/><hr/><br/><div id="StatCounter"><h4>Contatore assoluto delle visite</h4><a class="NoABigger" href="https://www.contatoreaccessi.com" rel="noopener" target="_blank" title="Contatore assoluto delle visite"><img alt="Conto assoluto delle visite" border="0" src="https://counter4.whocame.ovh/private/contatoreaccessi.php?c=3pfp8ahxbnm9e53pqtcnuxz8mq7wrk9s" title="Conto assoluto delle visite"/></a><!-- GoatCounter statistics - Doesn't require a GDPR notice, see <https://goatcounter.com/help/gdpr> --><img src="https://sitoctt.goatcounter.com/count?p=/Posts/Notes/Linux/2022-08-05-Evitare-Comandi-Richiamati-Per-Sbaglio.html" style="display: none; width: 0px; height: 0px;"/></div><br/><div class="Pixelated" id="MainBoxGlobalFooter"><hr/><br/><a class="NoABigger NoLinkLink" href="../../../Raccolte/Internet/Raccolta-Siti-Internet.html#-Il-mio"><img alt="âœ¨sitocttâœ¨" src="http://http.sitoctt-assets.octt.eu.org/public/Media/Buttons/Sites/sitoctt-1.png" title="âœ¨sitocttâœ¨"/></a><span> </span><img alt="Bandiera Octt" src="http://http.sitoctt-assets.octt.eu.org/public/Media/Buttons/Octt-Flag-88x31.png" title="Bandiera Octt"/><span> </span><!-- Bottone 88x31 | Fonte: https://astral.town | Licenza: Sconosciuta --><img alt="Occhi blink blink" src="http://http.sitoctt-assets.octt.eu.org/public/Media/Blink-0.gif" title="Occhi blink blink"/><br/><p><a href="../../../index.html#-Sorgenti-e-licenze">(Part.) Copyright</a> (C) 2022-2023, OctoSpacc</p><p><span id="BuildTimeLine">Pagina compilata in data: <span>2023-03-23 09:29</span></span><!--
-->Â |Â <!--
--><small><a href="https://gitlab.com/octtspacc/sitoctt/-/issues" rel="noopener" target="_blank">Commenti/Issue/PR?</a></small></p></div></div></div></div><div id="BottomBoxContainer"><label for="BottomBoxCheck" id="BottomBoxLabel" title="Apri/Chiudi Nastro Inferiore"><big><b>[<span class="twa twa-label twa-ğŸ·ï¸"><span>ğŸ·ï¸</span></span>]</b></big></label><input class="ToggleBoxCheck" id="BottomBoxCheck" type="checkbox"/><div class="ToggleBox" id="BottomBox"><h3 class="NoSelect"> [<a href="https://translate.google.com/translate?sl=it&amp;tl=en&amp;hl=en&amp;u=https://sitoctt.octt.eu.org/Posts/Notes/Linux/2022-08-05-Evitare-Comandi-Richiamati-Per-Sbaglio.html&amp;client=webapp" title="Open this Page in Google Translate"><!--
--><strong style="font-size: smaller;"><span class="twa twa-ğŸ³ï¸â€ğŸŒˆ"><span>ğŸ³ï¸â€ğŸŒˆ</span></span>Translate</strong><!--
--></a>]<!--
-->Â <!--
-->[<a href="#Container" title="Torna in Alto alla Pagina"><!--
--><strong><span class="twa twa-â¬†ï¸ twa-up-arrow"><span>â¬†ï¸</span></span>Su</strong><!--
--></a>] </h3></div></div><!-- <div id="PrivacyPopup"></div> --></div><script>
// Issue on Firefox 69 / Chromium: Getting background CSS property doesn't work, maybe background: url('') is invalid for <meta>? Maybe use content: ''?
var RawDataCss = JSON.parse(window.getComputedStyle(document.getElementById('RawDataCssInject')).background.split('url("')[1].split('")').slice(0, -1).join('")').replaceAll('\\\"', '\"'));

var MediaQuery = window.matchMedia(`(min-width: ${RawDataCss.DeskModeMinWid})`);
var SectionMenu = document.querySelector('#RightBoxContainer > Details');
var SectionButton = SectionMenu.querySelector('Summary');

var NormalOpen = SectionMenu.open;
SectionButton.onclick = function() {
	if (!MediaQuery.matches) {
		// For some reason without the ! it sets the opposite of what's really happening???
		// Maybe the onclick event fires before the details element is actually opened by the click?
		NormalOpen = !SectionMenu.open;
	};
};

function MediaQueryCheck(Query) {
	if (MediaQuery.matches) SectionMenu.open = true; // Go in desktop mode
	else SectionMenu.open = NormalOpen; // Going in normal mode
	// we must when handle user manually disable desktop mode if we want hide the button
	//SectionButton.style.display = {true: "none", false: ""}[Query.matches];
};
MediaQuery.addListener(MediaQueryCheck);
MediaQueryCheck(MediaQuery);

// Note: onclick doesn't work and doesn't show any error, wtf? But calling ShowHidePageBg manually works
/*
function ShowHidePageBg() {
	var Style = Body.style;
	if (Style.visibility || Style.overflow || Body.onclick) {
		Style.visibility = '';
		Style.overflow = '';
		Body.onclick = null;
	} else {
		Style.visibility = 'hidden';
		Style.overflow = 'hidden';	
		Body.onclick = ShowHidePageBg;
	};
};

var PageBgEl = document.getElementById('fn:PageBg');
if (PageBgEl) {
	var PageBgPar = PageBgEl.querySelector('p');
	var PageBgTokens = PageBgPar.innerHTML.split('</a>');
	PageBgPar.innerHTML = PageBgTokens[0] + '</a>&nbsp;<button onclick="ShowHidePageBg()">Guarda</button>' + PageBgTokens.slice(1, -1);
};
*/
</script><link href="http://http.sitoctt-assets.octt.eu.org/public/Fonts/SpaceMono/Style.css" rel="stylesheet"/></body></html>