<!DOCTYPE html>

<html lang="it"><head><meta charset="utf-8"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><link href="../../../Assets/Global.css" rel="stylesheet"/><link href="../../../feed/atom.xml" rel="alternate" title="Feed Atom" type="application/atom+xml"/><link href="../../../feed/rss.xml" rel="alternate" title="Feed RSS" type="application/rss+xml"/><title>Evitare di richiamare comandi per sbaglio nel terminale - ✨sitoctt✨</title><meta content="Lavorando nel terminale, magari allo sviluppo di programmi, mi capita spesso di richiamare per sbaglio un comando che non dovrei...." name="description"/><link href="../../../favicon.png" rel="icon" type="image/png"/><meta content="website" property="og:type"/><meta content=" Evitare di richiamare comandi per sbaglio nel terminale - ✨sitoctt✨" property="og:title"/><meta content="Lavorando nel terminale, magari allo sviluppo di programmi, mi capita spesso di richiamare per sbaglio un comando che non dovrei...." property="og:description"/><meta content="" property="og:image"/><meta content="https://sitoctt.octt.eu.org/Posts/Notes/Linux/2022-08-05-Evitare-Comandi-Richiamati-Per-Sbaglio.html" property="og:url"/><link href="https://sitoctt.octt.eu.org/Posts/Notes/Linux/2022-08-05-Evitare-Comandi-Richiamati-Per-Sbaglio.html" rel="canonical"/><!--
I still haven't yet prepared this lol
<script src="../../../Assets/AVIF-Polyfill/index.js" defer></script>
---><link href="../../../Assets/sitoctt.css" rel="stylesheet"/><link href="http://http.sitoctt-assets.octt.eu.org/public/Fonts/SpaceMono/Style.css" rel="stylesheet"/><style>
</style><link href="https://octtspacc.gitlab.io/twemoji-astonishing/twemoji-astonishing.min.css" rel="stylesheet"/></head><body id="Body"><div id="Header"></div><div id="Container"><div id="TopBox"><div id="TopBoxLeft"><h3><a href="../../../index.html"><strong class="twa twa-sparkles"><span>✨</span></strong><strong class="MainIdTextGradientL">sitoctt</strong><strong class="twa twa-sparkles"><span>✨</span></strong></a></h3></div><div id="TopBoxRight"><a class="NoABigger Pixelated" href="../../../index.html#-Feed-e-notifiche"><img alt="Feed" src="http://http.sitoctt-assets.octt.eu.org/public/Media/Buttons/Feed-88x31.png" title="Feed"/></a><span> </span><a class="NoABigger" href="../../../index.html#-Sorgenti-e-licenze"><img alt="CC BY-SA" height="31" src="http://http.sitoctt-assets.octt.eu.org/public/Media/Buttons/CC-BY-SA.svg" title="CC BY-SA" width="88"/></a></div></div><div id="MiddleBox"><div id="LeftBoxContainer"><details><summary><big><b>[<span class="twa twa-books"><span>📚</span></span>]</b></big></summary><div id="LeftBox"><ul><li><a href="../../../index.html"><span class="twa twa-house twa-🏠">🏠</span> ~Home~</a></li><li><a href="../../../Chi-Sono.html"><span class="twa twa-grinning-cat"><span>😺</span></span> Chi sono</a></li><li><a href="../../../Devlogs.html"><span class="twa twa-floppy-disk twa-💾">💾</span> Devlogs</a></li><li><a href="../../../PicoBlog.html"><span class="twa twa-envelope twa-✉️"><span>✉️</span></span> PicoBlog</a></li><li><a href="https://hub.octt.eu.org">💎 OctoSpacc Hub</a></li><li><a href="https://kb.octt.eu.org" rel="noopener" target="_blank">📦 OcttKB</a></li><li><del><a href="https://octtspacc.gitlab.io/bachecoctt" rel="noopener" target="_blank">🔖️ Bacheca (Old)</a></del></li><li><a href="../../../Donazioni.html"><span class="twa twa-money-bag"><span>💰</span></span> Donazioni</a></li><li><span class="twa twa-card-index-dividers"><span>🗂️</span></span> Raccolte <ul><li><a href="../../../Categories/Blog.html"><span class="twa twa-notebook twa-📓️"><span>📓️</span></span> Blog</a></li><li><a href="../../../Categories/MicroBlog.html"><span class="twa twa-ledger twa-📒"><span>📒</span></span> MicroBlog</a></li><li><a href="../../../Categories/Fritto-Misto.html"><span class="twa twa-unicorn"><span>🦄</span></span> Fritto Misto</a></li><li><a href="../../../Categories/DIY.html"><span class="twa twa-hammer-and-wrench"><span>🛠️</span></span> DIY</a></li><li><a href="../../../Categories/Ecologia.html"><span class="twa twa-recycling-symbol"><span>♻️</span></span> Ecologia</a></li><li><a href="../../../Categories/Gaming.html"><span class="twa twa-joystick"><span>🕹️</span></span> Gaming</a></li><li><a href="../../../Categories/Internet.html"><span class="twa twa-globe-with-meridians"><span>🌐️</span></span> Internet</a></li><li><a href="../../../Categories/Mobile.html"><span class="twa twa-mobile-phone"><span>📱️</span></span> Mobile</a></li><li><a href="../../../Categories/Note.html"><span class="twa twa-memo"><span>📝️</span></span> Note</a></li><li><a href="../../../Categories/Rasperino.html"><span class="twa twa-money-bag"><span>💰</span></span> Rasperino</a></li><li><a href="../../../Categories/Tecnologia.html"><span class="twa twa-satellite-antenna"><span>📡</span></span> Tecnologia</a></li></ul></li></ul><hr/><div class="Pixelated NoABigger" id="LeftBoxBottom"><a href="https://mastodon.uno/@octo" rel="noopener" target="_blank"><img src="http://http.sitoctt-assets.octt.eu.org/public/Media/Buttons/Follow-me-on-Mastodon-88x31.png" title="Follow me on Mastodon"/></a><span> </span><a href="https://www.gnu.org/home.it" rel="noopener nofollow" target="_blank"><img src="http://http.sitoctt-assets.octt.eu.org/public/Media/Buttons/Made-on-GNU-Linux-88x31.png" title="Made on GNU/Linux"/></a><br/><a href="https://www.mozilla.org/it/firefox" rel="noopener nofollow" target="_blank"><img src="http://http.sitoctt-assets.octt.eu.org/public/Media/Buttons/Firefox/Firefox-Modern-88x31.png" title="Firefox"/></a><span></span> <a href="https://www.torproject.org/it" rel="noopener nofollow" target="_blank"><img src="http://http.sitoctt-assets.octt.eu.org/public/Media/Buttons/Tor-88x31.png" title="Tor"/></a><br/><a href="https://archive.org" rel="noopener nofollow" target="_blank"><img src="http://http.sitoctt-assets.octt.eu.org/public/Media/Buttons/Sites/InternetArchive-88x31.png" title="Internet Archive"/></a><span> </span><!-- Wikipedia | https://commons.wikimedia.org/wiki/File:Wikipedia-microbar-hu.png ---><span><a href="https://www.wikipedia.org" rel="noopener nofollow" target="_blank" title="hu:User:Boro, CC BY-SA 3.0 &lt;https://creativecommons.org/licenses/by-sa/3.0&gt;, via Wikimedia Commons"><img src="http://http.sitoctt-assets.octt.eu.org/public/Media/Buttons/Sites/Wikipedia/Wikipedia-88x31.png" title="Wikipedia"/></a><a href="https://commons.wikimedia.org/wiki/File:Wikipedia-microbar-hu.png" rel="noopener nofollow" style="Font-Size:Small; Margin-Left:-2em; Color:Black; Vertical-Align:Super;" target="_blank" title="hu:User:Boro, CC BY-SA 3.0 &lt;https://creativecommons.org/licenses/by-sa/3.0&gt;, via Wikimedia Commons">[s]</a></span></div></div></details></div><div id="RightBoxContainer"><details><summary><big><b>[<span class="twa twa-bookmark-tabs"><span>📑</span></span>]</b></big></summary><div id="RightBox"><ul><li><a href="#-Evitare-di-richiamare-comandi-pe"> Evitare di richiamare comandi per sbaglio nel terminale</a></li><li><ul><li><a href="#-Lo-script"> Lo script</a></li></ul></li><li><ul><li><a href="#-Come-si-usa"> Come si usa</a></li></ul></li></ul></div></details></div><div id="MainBox"><div id="MainBoxTop"><p><span class="staticoso-ContentHeader-CreatedOn"><span class="staticoso-Label">Creato in data</span>: <span class="staticoso-Value">2022-08-05</span></span><br/><span class="staticoso-ContentHeader-Categories"><span class="staticoso-Label">Categorie</span>:<span class="staticoso-Value"> <a href="../../../Categories/Note.html">Note</a></span></span><br/></p></div><h1 class="SectionHeading staticoso-SectionHeading"><span class="SectionLink staticoso-SectionLink"><a href="#-Evitare-di-richiamare-comandi-pe"><span>»</span></a> </span><span class="SectionTitle staticoso-SectionTitle" id="-Evitare-di-richiamare-comandi-pe">Evitare di richiamare comandi per sbaglio nel terminale</span></h1><p>Lavorando nel terminale, magari allo sviluppo di programmi, mi capita spesso di richiamare per sbaglio un comando che non dovrei.</p><p>Ciò mi succede perché lavoro in questo modo: modifico qualcosa nella finestra del mio editor di testo di fiducia, quindi passo alla finestra del terminale, e premo <code>[Freccia Su]</code> (che richiama l'ultimo comando eseguito) ed <code>[Invio]</code> per eseguirlo.</p><p>Quello che ho notato è che certe volte, nella fretta, mi capita di premere una volta di troppo <code>[Freccia Su]</code>, cosa che richiama il penultimo comando eseguito, o quello ancora prima.<br/> Visto che praticamente queste sequenze di azioni le faccio quasi in automatico, senza leggere per accertarmi che il comando selezionato sia effettivamente quello che voglio prima di premere <code>[Invio]</code> (perché solo quello mi aspetto), accade diverse volte che io esegua un comando che non dovrei: spesso, si tratta del comando per fare un commit <a _:mdtgtblank:_="" href="https://en.wikipedia.org/wiki/Git" rel="noopener" target="_blank">Git</a> delle mie modifiche alla cartella di lavoro, e subito caricarle in cloud.</p><p>Ora, questa cosa non va bene, perché significa che nella cronologia di Git avrò certi punti "sbagliati": con descrizioni dal testo duplicato, e il codice in uno stato inadatto, non funzionante, perché ero nel pieno di testare alcune modifiche.<br/> Avere una cronologia di Git così conciata intacca decisamente la sua qualità, perché è più difficile trovare un punto specifico passato del codice in futuro, cosa che nullifica una delle funzionalità utili di Git - e in generale è qualcosa che non mi piace, mi da fastidio, vedere la cronologia sporca.</p><h2 class="SectionHeading staticoso-SectionHeading"><span class="SectionLink staticoso-SectionLink"><a href="#-Lo-script"><span>»</span></a> </span><span class="SectionTitle staticoso-SectionTitle" id="-Lo-script">Lo script</span></h2><p>Per risolvere il problema, mi sono inventata questo scriptino (testato con <em>sh</em> e <em>bash</em>), l'idea è di avviare i comandi "pericolosi" attraverso di lui nelle situazioni in cui devo fare quelle mie mosse con il terminale (ma, volendo, lo si può impostare come alias per richiamarlo in maniera implicita sempre per un dato comando).</p><pre class="CodeScroll"><code>Profile="~/.bashrc"

a=${RANDOM: -1}
b=${RANDOM: -1}

echo "[!] Confirm your command"
echo "[?] $a + $b = ?"
read Input

if [ "$Input" -eq "$((a+b))" ] 2&gt;/dev/null
then
    $SHELL -c "source "$Profile"; $@"
else
    echo "[!] Wrong input"
fi
</code></pre><h2 class="SectionHeading staticoso-SectionHeading"><span class="SectionLink staticoso-SectionLink"><a href="#-Come-si-usa"><span>»</span></a> </span><span class="SectionTitle staticoso-SectionTitle" id="-Come-si-usa">Come si usa</span></h2><p>Ho salvato il codice all'interno di una funzione <code>function comconf() { }</code> nel mio file di profilo bash.<br/> Ora, quando devo eseguire un comando marso, mi basta fare <code>comconf '&lt;comando&gt;'</code>; il programma mi chiederà di scrivere il risultato di un'operazione aritmetica semplice generata casualmente, e solo se ciò che scrivo è giusto (quindi, solo se sto prestando attenzione) il mio comando verrà eseguito.</p><pre class="CodeScroll"><code>$ # Esempio
$ comconf 'echo "Prova"; echo "Provina"'
[!] Confirm your command
[?] 1 + 3 = ?
4
Prova
Provina
$
</code></pre><hr/><p>Lo script ha qualche aspetto strano, per esempio il fatto che non funziona se eseguito direttamente dalla shell corrente (ed è per questo che esegue il comando desiderato in un altro processo di shell, con l'argomento <code>-c</code>). Per questo motivo, devo anche caricare esplicitamente il mio file di profilo nella nuova shell, perché non viene fatto in automatico e lì ho altri alias e funzioni che mi servono.<br/> Come se non bastasse, se non uso i singoli apici per racchiudere il comando che voglio chiamare, se questo contiene altri apici è come se questi venissero ignorati, e quindi il comando finale si può rompere.</p><p>Vabbe, problema risolto ad ogni modo. Niente più incidenti a causa di un <code>[Freccia Su]</code> di troppo.</p><div id="MainBoxBottom"><staticoso:comments><br/><hr/><br/><div id="StatCounter"><h4>Contatore assoluto delle visite</h4><a class="NoABigger" href="https://www.contatoreaccessi.com" rel="noopener" target="_blank" title="Contatore assoluto delle visite"><img alt="Conto assoluto delle visite" border="0" src="https://counter4.whocame.ovh/private/contatoreaccessi.php?c=3pfp8ahxbnm9e53pqtcnuxz8mq7wrk9s" title="Conto assoluto delle visite"/></a><!-- <a href="https://www.contatoreaccessi.com" title="contatori"><img src="https://counter9.stat.ovh/private/contatoreaccessi.php?c=3pfp8ahxbnm9e53pqtcnuxz8mq7wrk9s" border="0" title="contatori" alt="contatori"></a> --></div><br/><div class="Pixelated" id="MainBoxGlobalFooter"><hr/><br/><a class="NoABigger NoLinkLink" href="../../../Raccolte/Internet/Raccolta-Siti-Internet.html#-Il-mio"><img alt="✨sitoctt✨" src="http://http.sitoctt-assets.octt.eu.org/public/Media/Buttons/Sites/sitoctt-1.png" title="✨sitoctt✨"/></a><span> </span><img alt="Bandiera Octt" src="http://http.sitoctt-assets.octt.eu.org/public/Media/Buttons/Octt-Flag-88x31.png" title="Bandiera Octt"/><span> </span><!-- Bottone 88x31 | Fonte: https://astral.town | Licenza: Sconosciuta --><img alt="Occhi blink blink" src="http://http.sitoctt-assets.octt.eu.org/public/Media/Blink-0.gif" title="Occhi blink blink"/><br/><p><a href="../../../index.html#-Sorgenti-e-licenze">Copyright</a> (C) 2022, OctoSpacc</p><p id="BuildTimeLine">Pagina compilata in data: <span>2022-12-03 14:14</span></p></div></staticoso:comments></div></div></div><div id="BottomBoxContainer"><label for="BottomBoxCheck" id="BottomBoxLabel"><big><b>[<span class="twa twa-label"><span>🏷️</span></span>]</b></big></label><input id="BottomBoxCheck" type="checkbox"/><div class="ToggleBox" id="BottomBox"><h3 class="NoSelect"><a href="#Container"><strong class="twa twa-up-arrow"><span>⬆️</span></strong><strong> Torna su</strong></a></h3></div></div><!-- <div id="PrivacyPopup"></div> --></div></body></html>